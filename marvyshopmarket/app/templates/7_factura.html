{% extends 'base.html' %}
{% block title %}Marvy Shopmarket | Registrar ventas {% endblock %}
{% block content %}
{% if estado==1 %}

<div class="mensaje" style="display: flex;">
    <p class="mensaje-content" style="color: var(--btn-claro-continuar);">{{mensaje}}<br><img src="{{ url_for('static', filename='images/comprobado.png') }}" alt="comprobado" width=30%></p>
    
</div>        
<script>
    // const mensajes = document.getElementsByClassName('mensaje');

    function redirigirDespuesDeTiempo() {
        setTimeout(function() {
            window.location.href = '{{ url_for("main.ventas") }}';
        }, 2000);   
    }

    redirigirDespuesDeTiempo();
</script>
{% elif estado==0 %}
<div class="mensaje" style="display: flex;">
    <p class="mensaje-content" style="color: var(--btn-claro-cancelar);">{{mensaje}}<br><img src="{{ url_for('static', filename='images/error.png') }}" alt="comprobado" width=30%></p>
</div>
            
<script>
    // const mensajes2 = document.getElementsByClassName('mensaje');

    function redirigirDespuesDeTiempo() {
        setTimeout(function() {
            window.location.href = '{{ url_for("main.ventas") }}';
        }, 2000);   
    }

    redirigirDespuesDeTiempo();
</script>

{% else %}
<div class="mensaje">
    <p class="mensaje-content">{{mensaje}}</p>
</div>
{% endif %}
<div id="container_facturav" style="grid-column: 1/-1;grid-row: 1/-1; display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; padding: 2%; justify-content: center;">
            <div style="grid-column: 1/-1; display: grid; grid-template-columns: grid; grid-template-columns: 1fr 1fr 1fr;">
                <a href="/ventas"><button style="padding: 2%;">cancelar</button></a>
                <h1>Factura de venta</h1>
                <a><button style="padding: 2%;">confirmar</button></a>
                <div class="formulario" style="width: 100%;">
                    <form action="/ventas" method="post">
                        <table>
                            <thead>
                                    <tr>
                                        <td>
                                            <div><label for="producto_venta">Producto: </label></div>
                                            <input type="text" id="producto_venta" clas="input_fventa" placeholder="nombre del producto">
                                        </td>
                                        <td>
                                            <div><label>Cantidad: </label></div>
                                            <input type="text" id="venta_cantidad" class="input_fventa"  placeholder="cantidad vendida">
                                        </td>
                                        <td>
                                            <div><label>Método de pago: </label></div>
                                            <input type="text" id="venta_metodo" class="input_fventa" placeholder="Método de pago">
                                        </td>
                                        <td>
                                            <button type="submit">Regitrar producto</button>
                                        </td>
                                    </tr>
                            </thead>
                        </table>
                    </form>
                </div>
            </div>
            
    <div class="body_factura" style="grid-row: 2; grid-column: 1/-1;">
        <table>
            <thead>
                <th>Id</th>
                <th>Nombre del producto</th>
                <th>Precio Unitario</th>
                <th>Cantidad vendida</th>
                <th>Precio Total</th>
                <th>Método de pago</th>
                <th>Editar</th>
            </thead>
            <tbody>
                <!-- HTML y Jinja -->
             {% for venta in resultado %}
                <tr id="registro_{{ venta.id }}">
                    <td>{{ loop.index }}</td>
                    <td>{{ venta.id_producto }}</td>
                    <td>{{ venta.nombre }}</td>
                    <td>{{ venta.fecha }}</td>
                    <td>{{ venta.cantidad_vendido }}</td>
                    <td>{{ venta.precio }}</td>
                    <td>{{ venta.total }}</td>
                    <td>
                        <a href="/editar-venta/{{ venta.id }}" style="color: var(--claro-principal);" class="editar-venta"><i class="fa-solid fa-pen-to-square"></i></a>
                    </td>
                </tr>
             {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}